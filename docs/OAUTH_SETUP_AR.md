# ๐ ุฅุนุฏุงุฏ OAuth ูููุธุงู - ุฏููู ูุงูู

## โ ุชู ุงูุชุญุฏูุซ ุจูุฌุงุญ!

ุชู ุชุญุฏูุซ ููุงุชูุญ OAuth ุงูุฎุงุตุฉ ุจุงููุธุงู ูุญูุธูุง ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.

---

## ๐ ุงูููุงุชูุญ ุงูุฌุฏูุฏุฉ

### Client ID
```
7237bbd1-4609-4655-8f2b-32ceeb71c08d
```

### Client Secret
```
385e2043558908d82d4fba5e1a9468d2332a03765442171856063f69eaa9976
```

---

## ๐๏ธ ุฃูู ุชู ุญูุธ ุงูููุงุชูุญุ

### 1. ููู `.env`
```bash
SALLA_CLIENT_ID=7237bbd1-4609-4655-8f2b-32ceeb71c08d
SALLA_CLIENT_SECRET=385e2043558908d82d4fba5e1a9468d2332a03765442171856063f69eaa9976
```

### 2. ูุงุนุฏุฉ ุงูุจูุงูุงุช (system_settings)
```sql
SELECT * FROM system_settings WHERE setting_key LIKE 'SALLA_%';

-- ุงููุชูุฌุฉ:
-- SALLA_CLIENT_ID     | 7237bbd1-4609-4655-8...
-- SALLA_CLIENT_SECRET | 385e2043558908d82d4f...
```

---

## ๐ ููู ูุนูู ุงููุธุงู ุงูุขูุ

### 1. ุชุญุฏูุซ ุงูุชููู ุงูุชููุงุฆู
- ุงููุธุงู ููุญุต ุงูุชูููุงุช ูู 12 ุณุงุนุฉ
- ุฅุฐุง ูุงู ุงูุชููู ุณููุชูู ุฎูุงู 24 ุณุงุนุฉุ ูุชู ุชุญุฏูุซู ุชููุงุฆูุงู
- ูุณุชุฎุฏู ุงูููุงุชูุญ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 2. ุฅุถุงูุฉ ูุชุฌุฑ ุฌุฏูุฏ
ุนูุฏูุง ูุถูู ูุณุชุฎุฏู ูุชุฌุฑู ุนุจุฑ OAuth:
1. ูุฐูุจ ุฅูู: `http://localhost:8000/oauth/authorize`
2. ููุงูู ุนูู ุงูุตูุงุญูุงุช
3. ุงููุธุงู ูุญูุธ ุงูุชูููุงุช ุงูุฎุงุตุฉ ุจุงููุชุฌุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. ูุง ูุชู ุญูุธ ุฃู ุชูููุงุช ูู ููู `.env`

### 3. ุงูุชุญุณูู ุงูุชููุงุฆู
- ูู ูุชุฌุฑ ูุญุตู ุนูู CrewAI ุฎุงุต ุจู
- ูุญุชุฑู ุฅุนุฏุงุฏุงุช ุงููุชุฌุฑ (ูุงูุด ุงูุฑุจุญุ ูุถุน ุงูุชุดุบูู)
- ูุณุชุฎุฏู ุงูุชูููุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## ๐ ุงูุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช

### 1. ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
docker exec salla-postgres psql -U salla_user -d salla_optimizer -c "SELECT setting_key, LEFT(setting_value, 20) || '...' as value, description FROM system_settings WHERE setting_key LIKE 'SALLA_%';"
```

### 2. ุงูุชุญูู ูู ููู .env
```bash
cat .env | grep SALLA_CLIENT
```

### 3. ุงูุชุญูู ูู Celery
ุงูุชุญ Flower Dashboard:
```
http://localhost:5555
```

ุงุจุญุซ ุนู ุงูููุงู ุงููุฌุฏููุฉ:
- `refresh-tokens-12h` - ุชุญุฏูุซ ุงูุชูููุงุช ูู 12 ุณุงุนุฉ
- `optimize-all-stores-6h` - ุชุญุณูู ุฌููุน ุงููุชุงุฌุฑ ูู 6 ุณุงุนุงุช

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### 1. ุฅุถุงูุฉ ูุชุฌุฑ ุฌุฏูุฏ
```bash
# ุงูุชุญ ุงููุชุตูุญ ูุงูุชูู ุฅูู:
http://localhost:8000/oauth/authorize

# ุณูุชู ุชูุฌููู ุฅูู ุตูุญุฉ Salla ููููุงููุฉ
# ุจุนุฏ ุงูููุงููุฉุ ุณูุชู ุญูุธ ุงููุชุฌุฑ ุชููุงุฆูุงู
```

### 2. ูุฑุงูุจุฉ ุงููุธุงู
```bash
# ุงูุชุญ Dashboard
http://localhost:8501

# ุงุฐูุจ ุฅูู ุชุจููุจ "Activity"
# ุณุชุดุงูุฏ "System Action" ุนูุฏ ุชุญุฏูุซ ุงูุชูููุงุช
```

### 3. ุชุดุบูู ุชุญุณูู ูุฏูู
```bash
# ูู Dashboardุ ุงุฎุชุฑ ุงููุชุฌุฑ
# ุงุถุบุท ุนูู "RUN NOW"
```

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุชููู ูุง ูุชุญุฏุซ ุชููุงุฆูุงู

**ุงูุญู:**
```bash
# ุชุญูู ูู Celery Beat
docker logs salla-celery-beat --tail 50

# ุฃุนุฏ ุชุดุบูู Celery
docker-compose restart celery_beat celery_worker
```

### ุงููุดููุฉ: ุงููุชุฌุฑ ุชู ุชุนุทููู ุชููุงุฆูุงู

**ุงูุณุจุจ ุงููุญุชูู:**
- ุงููุชุฌุฑ ุฃูุบู ุชุซุจูุช ุงูุชุทุจูู
- ุงูุชููู ุบูุฑ ุตุงูุญ

**ุงูุญู:**
```bash
# ุชุญูู ูู ุณุฌู ุงูุฃูุดุทุฉ
docker exec salla-postgres psql -U salla_user -d salla_optimizer -c "SELECT * FROM activity_logs WHERE activity_type = 'system_store_deactivated' ORDER BY created_at DESC LIMIT 5;"

# ุฃุนุฏ ุชูุนูู ุงููุชุฌุฑ ุนุจุฑ OAuth
# ุงุฐูุจ ุฅูู: http://localhost:8000/oauth/authorize
```

### ุงููุดููุฉ: ูุง ูููู ุงููุตูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงูุญู:**
```bash
# ุชุญูู ูู ุฃู PostgreSQL ูุนูู
docker ps | grep postgres

# ุฅุฐุง ูู ููู ูุนููุ ุดุบูู
docker-compose up -d db
```

---

## ๐ ูุฑุงูุจุฉ ุงูุฃุฏุงุก

### 1. Flower Dashboard
```
http://localhost:5555
Username: admin
Password: admin123
```

**ูุง ููููู ูุดุงูุฏุชู:**
- ุงูููุงู ุงููุดุทุฉ
- ุงูููุงู ุงููุฌุฏููุฉ
- ุชุงุฑูุฎ ุงูููุงู
- ูุนุฏู ุงููุฌุงุญ/ุงููุดู

### 2. Dashboard ุงูุฑุฆูุณู
```
http://localhost:8501
```

**ูุง ููููู ูุดุงูุฏุชู:**
- ุณุฌู ุงูุฃูุดุทุฉ (Activity Logs)
- ุฅุญุตุงุฆูุงุช ุงูุชุญุณูู
- ุญุงูุฉ ุงููุชุงุฌุฑ
- ุชูุตูุงุช ุงูุฃุณุนุงุฑ

### 3. ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุนุฏุฏ ุงููุชุงุฌุฑ ุงููุดุทุฉ
docker exec salla-postgres psql -U salla_user -d salla_optimizer -c "SELECT COUNT(*) FROM stores WHERE is_active = true;"

# ุงูุชูููุงุช ุงูุชู ุณุชูุชูู ูุฑูุจุงู
docker exec salla-postgres psql -U salla_user -d salla_optimizer -c "SELECT store_id, store_name, token_expires_at FROM stores WHERE token_expires_at < NOW() + INTERVAL '24 hours' AND is_active = true;"

# ุขุฎุฑ ุนูููุงุช ุงูุชุญุณูู
docker exec salla-postgres psql -U salla_user -d salla_optimizer -c "SELECT store_id, status, products_updated, started_at FROM optimization_runs ORDER BY started_at DESC LIMIT 10;"
```

---

## ๐ฏ ููุฎุต ุงูุฅุนุฏุงุฏุงุช

### โ ูุง ุชู ุฅูุฌุงุฒู:

1. **ุชุญุฏูุซ ุงูููุงุชูุญ:**
   - Client ID: `7237bbd1-4609-4655-8f2b-32ceeb71c08d`
   - Client Secret: `385e2043558908d82d4fba5e1a9468d2332a03765442171856063f69eaa9976`

2. **ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
   - ุฌุฏูู `system_settings`
   - ูููู ุงููุตูู ุฅูููุง ูู ุฃู container

3. **ุชุญุฏูุซ ููู .env:**
   - ุฅุถุงูุฉ ุงูููุงุชูุญ ุงูุฌุฏูุฏุฉ
   - ุชุญุฏูุซ .env.example

4. **ุฅุนุงุฏุฉ ุชุดุบูู Celery:**
   - celery_worker
   - celery_beat

### ๐ ุงูุฌุฏูู ุงูุฒููู ููููุงู:

- **ูู 12 ุณุงุนุฉ:** ุชุญุฏูุซ ุงูุชูููุงุช
- **ูู 6 ุณุงุนุงุช:** ุชุญุณูู ุฌููุน ุงููุชุงุฌุฑ
- **ูู ุณุงุนุฉ:** ูุญุต ุงููุชุงุฌุฑ ุงูุชู ุชุญุชุงุฌ ุชุญุณูู
- **ูู ุฃุณุจูุน:** ุชูุธูู ุงูุจูุงูุงุช ุงููุฏููุฉ

### ๐ ุงููุธุงู ุฌุงูุฒ!

ุงููุธุงู ุงูุขู ูุนูู ุจุดูู ูุงูู ูุชููุงุฆู:
- โ ุชุญุฏูุซ ุงูุชูููุงุช ุชููุงุฆูุงู
- โ ุชุญุณูู ุงูุฃุณุนุงุฑ ุชููุงุฆูุงู
- โ ูุฑุงูุจุฉ ุตุญุฉ ุงููุชุงุฌุฑ
- โ ุชุนุทูู ุงููุชุงุฌุฑ ุงููุดููุฉ ุชููุงุฆูุงู
- โ ุณุฌู ูุงูู ูุฌููุน ุงูุฃูุดุทุฉ

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:

1. **ุชุญูู ูู Logs:**
   ```bash
   docker logs salla-celery-worker --tail 100
   docker logs salla-api --tail 100
   ```

2. **ุชุญูู ูู Flower:**
   ```
   http://localhost:5555
   ```

3. **ุชุญูู ูู Dashboard:**
   ```
   http://localhost:8501
   ```

4. **ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
   ```bash
   docker exec -it salla-postgres psql -U salla_user -d salla_optimizer
   ```

---

**ุชู ุงูุชุญุฏูุซ:** 13 ูุจุฑุงูุฑ 2026  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุฅูุชุงุฌ
